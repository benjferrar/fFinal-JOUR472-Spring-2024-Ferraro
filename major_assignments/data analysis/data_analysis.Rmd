---
title: "Data "
author: " Benji Ferraro, Marwa Barakat, Auzinea Bacon "
date: "4/23/2024"
output:
  html_document:
    theme: cerulean
    highlight: pygments
    toc: true
    toc_float:
      collapsed: true
      smooth_scroll: false \
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# Turn off scientific notation
options(scipen=999)
```

## Introduction

In this notebook, we are reverse engineering the story, [STORY NAME](STORY%20URL)

## Load libraries

Loading required libraries for this analysis.

```{r echo=FALSE, message=FALSE}
library(tidyverse)
library(lubridate)
library(janitor)
```

## Load and Cleaning Data

In this section, describe the source of the data, write a basic data dictionary for data you are working with, and discuss any caveats or issues you discovered working with this data.

```{r}
# Load required data


# Path to data should be loaded from folder "data" i.e. read_csv("data/name_of_data.csv")

board_game_data <- read_csv2("archive/bgg_dataset.csv") |>

# Clean required data and prepare for analysis if needed

clean_names()

```

There are 20,343 rows and 14 total columns. There seem to be some current limitations and flaws after cleaning the data. For example , on the minimum players and year-published columns there are negative numbers or zero values, indicating a possible error in the data set as that shouldn't be possible. Limits that we found initially could be there are only board games included that were manufactured before 2023. Maybe for some of the board games with an incorrect year manufacturing date or minimum player suggestion we can verify on Amazon, the retailer or Google as extra research. Possibly researching the brands and companies behind the board games would be a piece of extra beneficial data as it is not included in our current spreadsheet. The complexity average column we are pretty sure means how difficult a game is especially for younger players, but finding more concrete confirmation of what that column represents could be helpful.

## Sentences to Engineer

In this notebook, we are reverse engineering five sentences from the story.

### Sentence 1

-   **Sentence text**: Compare the average rating across all board games between 1900 and 1999, and 2000-2022.
-   **Analysis summary**: We mutated the data so that we could compare both centuries in terms of average rating for board games. We mutated the years published and grouped by timespan for average rating, and got approximately 6.5 for the average rating from 2000 to 2022, and 6 for the average rating from 1900-1999. In terms of modern board games, it seems that the 21st century has a higher average score. This could be due to differing total amounts for each of the centuries, which could skew the data.

```{r}
# Put code to reverse engineer sentence here

board_game_years <-board_game_data |>
  mutate (
    timespan = case_when(
      between(year_published, 1900, 1999) ~ '1900-1999',
      between(year_published, 2000, 2022) ~ '2000-2022',
      .default = 'N/A'
      ))
  
board_game_years |>
  group_by(timespan) |>
  summarise(
    avg_rating = mean(rating_average)
   ) |>
  filter(timespan != 'N/A') |>
  arrange(desc(avg_rating))

# Display results of code below this codeblock

```

### Sentence 2

-   **Sentence text**: What age group is targeted most by these board games?
-   **Analysis summary**: In order to better look at age demographics, we grouped the minimum ages. Because the data only listed the minimum ages, we grouped them by 1-5, 6-12 , 13-17 and 18+. One important thing to note is that these aren't the age groups listed on each game but instead are the minimum ages for each game grouped together. For example, the 1-5 group is not games for ages 1 to 5. It is actually the games with minimum ages between 1 and 5 years old. The same applies to the other categories as well. After making these groups, we counted how many games fell under each one to see which age group is targeted most. There were over 14,000 games in this data set with minimum ages between 6 and 12 years old â€“ more than any other age group. Because there were about 1,000 games with no minimum age listed, it was not possible for us to find the age of each board game, so it is important to note that those were not included in this analysis.

```{r}
board_game_ages <- board_game_data |>
  mutate(
    age_groups = case_when(
     between(min_age, 1, 5) ~ '1-5',
     between(min_age, 6, 12) ~ '6-12',
     between(min_age, 13, 17) ~ '13-17',
     min_age >= 18 ~ '18+',
     .default = 'N/A'
     )
  ) 

board_game_ages |>
  group_by(age_groups) |>
  summarise(
    total_games = n()
  ) |>
  filter(age_groups != 'N/A') |>
  arrange(desc(total_games))
```

### Sentence 3

-   **Sentence text**: Are solo board games more reviewed compared to multiplayer games?

-   **Analysis summary**: Single player games have fewer reviews than multiplayer games in this data set, as shown by the total ratings column below. There are about 168,000 more reviews for multiplayer games than single player games. However, there is also a much larger number of multiplayer games overall when compared to single player - there are less than 500 single player games in the review list. This means that there are statistically more opportunities to review multiplayer games than single player and, potentially, groups involved in playing multiplayer games may individually leave multiple reviews for those games, resulting in many more ratings for those games than single players. We calculated an average number of ratings to account for this difference, showing multiplayer games in this data set on average have a higher number of ratings.{r} \# Put code to reverse engineer sentence here

    board_game_players \<- board_game_data \|\> mutate(total_players = min_players+max_players) \|\> mutate( player_type = case_when( total_players \<= 1\~ "singleplayer", total_players \>= 2 \~ "multiplayer", .default = NA ))

    #Group by player type and count the number of ratings. Also, a sum of the number of games considered multiplayer and singleplayer for context.

    board_game_player_ages \<- board_game_players \|\> group_by(player_type)\|\> summarise( total_ratings = sum(users_rated), total_games = n() )

    board_game_player_ages \|\> mutate( avg_ratings = (total_ratings/sum(total_ratings))\*100 ) \|\> arrange(desc(avg_ratings))

    \`\`

### Sentence 4

-   **Sentence text**: What decades had the games owned by the most users?
-   **Analysis summary**: We first made a new column grouping together games published in the same decade starting from the year 1900. Then, we made a table showing how many total games fall under each decade, how many total owners there are of games in that decade, and the average number of owners per game in each decade. Then, to further learn more from the data, we calculated the average number of owners in each decade by comparing it to the total owners for all of those decades. This way the averages can be better compared to each other. We found that games published between 2010 and 2019 in this data set had the highest average owners compared to the other decades.

```{r}
# Put code to reverse engineer sentence here

board_game_owners <-board_game_data |>
  mutate (
    decades = case_when(
      between(year_published, 1900, 1909) ~ '1900-1999',
      between(year_published, 2000, 2022) ~ '2000-2022',
      .default = 'N/A'
      ))

# Display results of code below this codeblock

```

### Sentence 5

-   **Sentence text**:Compare two of the most common domains and how many games there are of them.
-   
-   **Analysis summary**: First, we wanted to see which domains were the most popular that the board games in this data fell under. After analyzing the data and noticing that strategy games and war games were some of the most common domains, we decided to compare those two categories alone. Since the domain category listed all applicable categories, we first used "strdetect" to find all of the games with "Strategy Games" as one of their domains. Next, we did the same for "War games." After doing this, we found that this data set had 3316 war games and 2205 strategy games, showing that from the games in this data set, war games are more common.

```{r}
# Put code to reverse engineer sentence here

#This is to see which domains are most common in this data set
board_game_domains <- board_game_data |>
  group_by(domains) |>
  summarise(
    count = n()
  ) |>
  arrange(desc(count))


strategy <- board_game_data |>
  filter(str_detect(domains, "Strategy Games")) |>
  group_by(domains) |>
  summarise(
    total_games = n(),
    ) |>
  mutate(
    total = sum(total_games)
  )



war <- board_game_data |>
  filter(str_detect(domains, "Wargames")) |>
  group_by(domains) |>
  summarize(
    total_games = n()) |>
  mutate(
    total = sum(total_games)
  )
  


# Display results of code below this codeblock

```
